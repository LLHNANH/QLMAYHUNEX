<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Đăng ký tài khoản</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: linear-gradient(135deg, #74ABE2, #5563DE);
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    margin: 0;
  }
  .container {
    background: #fff;
    padding: 25px 30px;
    border-radius: 12px;
    box-shadow: 0 4px 20px rgba(0,0,0,0.15);
    width: 350px;
    text-align: center;
  }
  h2 {
    color: #333;
    margin-bottom: 20px;
  }
  .form-group {
    margin-bottom: 15px;
    text-align: left;
  }
  label {
    display: block;
    margin-bottom: 5px;
    font-weight: 600;
    color: #444;
  }
  input {
    width: 100%;
    padding: 10px;
    border: 1px solid #ccc;
    border-radius: 8px;
    outline: none;
    transition: border-color 0.3s;
  }
  input:focus {
    border-color: #5563DE;
  }
  button {
    width: 100%;
    padding: 10px;
    background-color: #5563DE;
    color: white;
    border: none;
    border-radius: 8px;
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
    transition: background-color 0.3s;
  }
  button:hover:enabled {
    background-color: #3b49b3;
  }
  button:disabled {
    background-color: #888;
    cursor: not-allowed;
  }
  #result {
    margin-top: 15px;
    font-weight: bold;
  }
</style>
</head>
<body>

<div class="container">
  <h2>Đăng ký tài khoản</h2>
  <div class="form-group">
    <label for="username">Tên đăng nhập</label>
    <input type="text" id="username" placeholder="Nhập tên đăng nhập">
  </div>
  <div class="form-group">
    <label for="role">Vai trò</label>
    <input type="text" id="role" placeholder="Nhập vai trò (VD: User)">
  </div>
  <div class="form-group">
    <label for="password">Mật khẩu</label>
    <input type="password" id="password" placeholder="Nhập mật khẩu">
  </div>
  <div class="form-group">
    <label for="confirm">Xác nhận mật khẩu</label>
    <input type="password" id="confirm" placeholder="Nhập lại mật khẩu">
  </div>
  <button type="button" onclick="registerUser()">Đăng ký</button>
  <div id="result"></div>
</div>

<script>
function registerUser() {
  // Lấy dữ liệu từ form
  var username = document.getElementById('username').value.trim();
  var role = document.getElementById('role').value.trim();
  var password = document.getElementById('password').value;
  var confirm = document.getElementById('confirm').value;

  // Hiển thị debug trước khi gửi
  // document.getElementById('debug').innerHTML =
    // `<b>Dữ liệu chuẩn bị gửi:</b><br>
     // Username: ${username || '(trống)'}<br>
     // Role: ${role || '(trống)'}<br>
     // Password: ${password ? '(đã nhập)' : '(trống)'}<br>
     // Confirm: ${confirm ? '(đã nhập)' : '(trống)'}<br>`;

  // Kiểm tra thiếu trường trước khi gửi
  if (!username || !role || !password || !confirm) {
    document.getElementById('result').style.color = 'red';
    document.getElementById('result').textContent = 'Vui lòng nhập đầy đủ thông tin!';
    return;
  }

   // Bật trạng thái loading
  btn.textContent = '⏳ Đang xử lý...';
  btn.disabled = true;
  resultDiv.textContent = '';

  // Gửi dữ liệu qua JSONP
  var script = document.createElement('script');
  script.src = 'https://script.google.com/macros/s/AKfycbyoSnUazIrzpvJYwf7WemJDBNDu8bdymas2vpXHv6zv8gAFHrpnTx6zfIRBgnCW6Y4V/exec'
    + '?username=' + encodeURIComponent(username)
    + '&role=' + encodeURIComponent(role)
    + '&password=' + encodeURIComponent(password)
    + '&confirm=' + encodeURIComponent(confirm)
    + '&callback=handleResponse';
  document.body.appendChild(script);
}

function handleResponse(response) {
  var resultDiv = document.getElementById('result');
  if (response.status === 'success') {
    resultDiv.style.color = 'green';
  } else {
    resultDiv.style.color = 'red';
  }
  resultDiv.textContent = response.message;
  
  // Tắt trạng thái loading
  btn.textContent = 'Đăng ký';
  btn.disabled = false;
}
</script>


</body>
</html>




